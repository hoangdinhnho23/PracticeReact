const I=Math.min,$=Math.max,x=Math.round,R=Math.floor,O=t=>({x:t,y:t});function q(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function B(t){return W(t)?(t.nodeName||"").toLowerCase():"#document"}function w(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function V(t){var e;return(e=(W(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function W(t){return t instanceof Node||t instanceof w(t).Node}function S(t){return t instanceof Element||t instanceof w(t).Element}function T(t){return t instanceof HTMLElement||t instanceof w(t).HTMLElement}function z(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof w(t).ShadowRoot}function H(t){const{overflow:e,overflowX:n,overflowY:o,display:i}=D(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(i)}function U(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function k(t){return["html","body","#document"].includes(B(t))}function D(t){return w(t).getComputedStyle(t)}function K(t){if(B(t)==="html")return t;const e=t.assignedSlot||t.parentNode||z(t)&&t.host||V(t);return z(e)?e.host:e}function _(t){const e=K(t);return k(e)?t.ownerDocument?t.ownerDocument.body:t.body:T(e)&&H(e)?e:_(e)}function C(t,e,n){var o;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=_(t),s=i===((o=t.ownerDocument)==null?void 0:o.body),r=w(i);return s?e.concat(r,r.visualViewport||[],H(i)?i:[],r.frameElement&&n?C(r.frameElement):[]):e.concat(i,C(i,[],n))}function X(t){const e=D(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const i=T(t),s=i?t.offsetWidth:n,r=i?t.offsetHeight:o,c=x(n)!==s||x(o)!==r;return c&&(n=s,o=r),{width:n,height:o,$:c}}function F(t){return S(t)?t:t.contextElement}function N(t){const e=F(t);if(!T(e))return O(1);const n=e.getBoundingClientRect(),{width:o,height:i,$:s}=X(e);let r=(s?x(n.width):n.width)/o,c=(s?x(n.height):n.height)/i;return(!r||!Number.isFinite(r))&&(r=1),(!c||!Number.isFinite(c))&&(c=1),{x:r,y:c}}const Y=O(0);function j(t){const e=w(t);return!U()||!e.visualViewport?Y:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function G(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==w(t)?!1:e}function A(t,e,n,o){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=F(t);let r=O(1);e&&(o?S(o)&&(r=N(o)):r=N(t));const c=G(s,n,o)?j(s):O(0);let a=(i.left+c.x)/r.x,u=(i.top+c.y)/r.y,g=i.width/r.x,p=i.height/r.y;if(s){const b=w(s),d=o&&S(o)?w(o):o;let v=b,l=v.frameElement;for(;l&&o&&d!==v;){const m=N(l),f=l.getBoundingClientRect(),h=D(l),y=f.left+(l.clientLeft+parseFloat(h.paddingLeft))*m.x,E=f.top+(l.clientTop+parseFloat(h.paddingTop))*m.y;a*=m.x,u*=m.y,g*=m.x,p*=m.y,a+=y,u+=E,v=w(l),l=v.frameElement}}return q({width:g,height:p,x:a,y:u})}function J(t,e){let n=null,o;const i=V(t);function s(){var c;clearTimeout(o),(c=n)==null||c.disconnect(),n=null}function r(c,a){c===void 0&&(c=!1),a===void 0&&(a=1),s();const{left:u,top:g,width:p,height:b}=t.getBoundingClientRect();if(c||e(),!p||!b)return;const d=R(g),v=R(i.clientWidth-(u+p)),l=R(i.clientHeight-(g+b)),m=R(u),h={rootMargin:-d+"px "+-v+"px "+-l+"px "+-m+"px",threshold:$(0,I(1,a))||1};let y=!0;function E(M){const L=M[0].intersectionRatio;if(L!==a){if(!y)return r();L?r(!1,L):o=setTimeout(()=>{r(!1,1e-7)},100)}y=!1}try{n=new IntersectionObserver(E,{...h,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,h)}n.observe(t)}return r(!0),s}function Q(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:r=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:a=!1}=o,u=F(t),g=i||s?[...u?C(u):[],...C(e)]:[];g.forEach(f=>{i&&f.addEventListener("scroll",n,{passive:!0}),s&&f.addEventListener("resize",n)});const p=u&&c?J(u,n):null;let b=-1,d=null;r&&(d=new ResizeObserver(f=>{let[h]=f;h&&h.target===u&&d&&(d.unobserve(e),cancelAnimationFrame(b),b=requestAnimationFrame(()=>{var y;(y=d)==null||y.observe(e)})),n()}),u&&!a&&d.observe(u),d.observe(e));let v,l=a?A(t):null;a&&m();function m(){const f=A(t);l&&(f.x!==l.x||f.y!==l.y||f.width!==l.width||f.height!==l.height)&&n(),l=f,v=requestAnimationFrame(m)}return n(),()=>{var f;g.forEach(h=>{i&&h.removeEventListener("scroll",n),s&&h.removeEventListener("resize",n)}),p==null||p(),(f=d)==null||f.disconnect(),d=null,a&&cancelAnimationFrame(v)}}export{Q as a};
